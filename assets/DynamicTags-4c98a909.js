import{a as w,b as L,M as P,aT as $,e as B,u as K,ai as W,h as U,aj as E,i as M,ad as N,R as H,x as q,aU as G,a7 as D}from"./router-06f85e02.js";import{u as J}from"./use-locale-37e06511.js";import{i as Q,a as X}from"./Grid-1afbda6b.js";import{A as Y}from"./Add-2419a63e.js";import{s as Z,_ as ee}from"./Space-803a17c4.js";import{d as ne,r as h,a2 as te,c as V,h as r,n as ae}from"./plugin-vueexport-helper-e229d7b0.js";function se(n){switch(n){case"tiny":return"mini";case"small":return"tiny";case"medium":return"small";case"large":return"medium";case"huge":return"large"}throw Error(`${n} has no smaller size.`)}const ie=w({name:"DynamicTags",common:L,peers:{Input:Q,Button:P,Tag:$,Space:Z},self(){return{inputWidth:"64px"}}}),ue=ie,re=B("dynamic-tags",[B("input",{minWidth:"var(--n-input-width)"})]),le=Object.assign(Object.assign(Object.assign({},U.props),G),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputStyle:[String,Object],inputProps:Object,max:Number,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:n=>n},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),he=ne({name:"DynamicTags",props:le,setup(n){const{mergedClsPrefixRef:f,inlineThemeDisabled:l}=K(n),{localeRef:o}=J("DynamicTags"),c=W(n),{mergedDisabledRef:s}=c,d=h(""),m=h(!1),p=h(!0),y=h(null),v=U("DynamicTags","-dynamic-tags",re,ue,n,f),C=h(n.defaultValue),F=te(n,"value"),i=E(F,C),S=V(()=>o.value.add),O=V(()=>se(n.size)),b=V(()=>s.value||!!n.max&&i.value.length>=n.max);function _(e){const{onChange:t,"onUpdate:value":g,onUpdateValue:x}=n,{nTriggerFormInput:j,nTriggerFormChange:k}=c;t&&D(t,e),x&&D(x,e),g&&D(g,e),C.value=e,j(),k()}function T(e){const t=i.value.slice(0);t.splice(e,1),_(t)}function z(e){switch(e.key){case"Enter":u()}}function u(e){const t=e??d.value;if(t){const g=i.value.slice(0);g.push(n.onCreate(t)),_(g)}m.value=!1,p.value=!0,d.value=""}function R(){u()}function A(){m.value=!0,ae(()=>{var e;(e=y.value)===null||e===void 0||e.focus(),p.value=!1})}const I=V(()=>{const{self:{inputWidth:e}}=v.value;return{"--n-input-width":e}}),a=l?M("dynamic-tags",void 0,I,n):void 0;return{mergedClsPrefix:f,inputInstRef:y,localizedAdd:S,inputSize:O,inputValue:d,showInput:m,inputForceFocused:p,mergedValue:i,mergedDisabled:s,triggerDisabled:b,handleInputKeyUp:z,handleAddClick:A,handleInputBlur:R,handleCloseClick:T,handleInputConfirm:u,mergedTheme:v,cssVars:l?void 0:I,themeClass:a==null?void 0:a.themeClass,onRender:a==null?void 0:a.onRender}},render(){const{mergedTheme:n,cssVars:f,mergedClsPrefix:l,onRender:o,renderTag:c}=this;return o==null||o(),r(ee,{class:[`${l}-dynamic-tags`,this.themeClass],size:"small",style:f,theme:n.peers.Space,themeOverrides:n.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:s,tagStyle:d,type:m,round:p,size:y,color:v,closable:C,mergedDisabled:F,showInput:i,inputValue:S,inputStyle:O,inputSize:b,inputForceFocused:_,triggerDisabled:T,handleInputKeyUp:z,handleInputBlur:u,handleAddClick:R,handleCloseClick:A,handleInputConfirm:I,$slots:a}=this;return this.mergedValue.map((e,t)=>c?c(e,t):r(N,{key:t,theme:s.peers.Tag,themeOverrides:s.peerOverrides.Tag,style:d,type:m,round:p,size:y,color:v,closable:C,disabled:F,onClose:()=>A(t)},{default:()=>typeof e=="string"?e:e.label})).concat(i?a.input?a.input({submit:I,deactivate:u}):r(X,Object.assign({placeholder:"",size:b,style:O,autosize:!0},this.inputProps,{ref:"inputInstRef",value:S,onUpdateValue:e=>{this.inputValue=e},theme:s.peers.Input,themeOverrides:s.peerOverrides.Input,onKeyup:z,onBlur:u,internalForceFocus:_})):a.trigger?a.trigger({activate:R,disabled:T}):r(H,{dashed:!0,disabled:T,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:b,onClick:R},{icon:()=>r(q,{clsPrefix:l},{default:()=>r(Y,null)})}))}})}});export{he as _};
