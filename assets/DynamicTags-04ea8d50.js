import{aG as P,C as U,aH as j,aN as K,D as B,H as $,I as H,az as N,r as h,J as L,a6 as W,a5 as E,K as F,L as G,v as l,am as J,x as M,aK as q,aO as Q,ai as X,aF as A}from"./index-dd25a306.js";import{u as Y}from"./use-locale-bc572da0.js";import{i as Z,a as ee}from"./Grid-b946789c.js";import{A as ne}from"./Add-a4912684.js";import{s as te,_ as ae}from"./Space-3ed4c2f2.js";function se(n){switch(n){case"tiny":return"mini";case"small":return"tiny";case"medium":return"small";case"large":return"medium";case"huge":return"large"}throw Error(`${n} has no smaller size.`)}const ie=P({name:"DynamicTags",common:U,peers:{Input:Z,Button:j,Tag:K,Space:te},self(){return{inputWidth:"64px"}}}),ue=ie,le=B("dynamic-tags",[B("input",{minWidth:"var(--n-input-width)"})]),re=Object.assign(Object.assign(Object.assign({},L.props),Q),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputStyle:[String,Object],inputProps:Object,max:Number,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:n=>n},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),ge=$({name:"DynamicTags",props:re,setup(n){const{mergedClsPrefixRef:f,inlineThemeDisabled:r}=H(n),{localeRef:o}=Y("DynamicTags"),c=N(n),{mergedDisabledRef:s}=c,d=h(""),m=h(!1),p=h(!0),y=h(null),v=L("DynamicTags","-dynamic-tags",le,ue,n,f),C=h(n.defaultValue),V=W(n,"value"),i=E(V,C),O=F(()=>o.value.add),S=F(()=>se(n.size)),b=F(()=>s.value||!!n.max&&i.value.length>=n.max);function _(e){const{onChange:t,"onUpdate:value":g,onUpdateValue:x}=n,{nTriggerFormInput:k,nTriggerFormChange:w}=c;t&&A(t,e),x&&A(x,e),g&&A(g,e),C.value=e,k(),w()}function T(e){const t=i.value.slice(0);t.splice(e,1),_(t)}function z(e){switch(e.key){case"Enter":u()}}function u(e){const t=e??d.value;if(t){const g=i.value.slice(0);g.push(n.onCreate(t)),_(g)}m.value=!1,p.value=!0,d.value=""}function I(){u()}function D(){m.value=!0,X(()=>{var e;(e=y.value)===null||e===void 0||e.focus(),p.value=!1})}const R=F(()=>{const{self:{inputWidth:e}}=v.value;return{"--n-input-width":e}}),a=r?G("dynamic-tags",void 0,R,n):void 0;return{mergedClsPrefix:f,inputInstRef:y,localizedAdd:O,inputSize:S,inputValue:d,showInput:m,inputForceFocused:p,mergedValue:i,mergedDisabled:s,triggerDisabled:b,handleInputKeyUp:z,handleAddClick:D,handleInputBlur:I,handleCloseClick:T,handleInputConfirm:u,mergedTheme:v,cssVars:r?void 0:R,themeClass:a==null?void 0:a.themeClass,onRender:a==null?void 0:a.onRender}},render(){const{mergedTheme:n,cssVars:f,mergedClsPrefix:r,onRender:o,renderTag:c}=this;return o==null||o(),l(ae,{class:[`${r}-dynamic-tags`,this.themeClass],size:"small",style:f,theme:n.peers.Space,themeOverrides:n.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:s,tagStyle:d,type:m,round:p,size:y,color:v,closable:C,mergedDisabled:V,showInput:i,inputValue:O,inputStyle:S,inputSize:b,inputForceFocused:_,triggerDisabled:T,handleInputKeyUp:z,handleInputBlur:u,handleAddClick:I,handleCloseClick:D,handleInputConfirm:R,$slots:a}=this;return this.mergedValue.map((e,t)=>c?c(e,t):l(J,{key:t,theme:s.peers.Tag,themeOverrides:s.peerOverrides.Tag,style:d,type:m,round:p,size:y,color:v,closable:C,disabled:V,onClose:()=>D(t)},{default:()=>typeof e=="string"?e:e.label})).concat(i?a.input?a.input({submit:R,deactivate:u}):l(ee,Object.assign({placeholder:"",size:b,style:S,autosize:!0},this.inputProps,{ref:"inputInstRef",value:O,onUpdateValue:e=>{this.inputValue=e},theme:s.peers.Input,themeOverrides:s.peerOverrides.Input,onKeyup:z,onBlur:u,internalForceFocus:_})):a.trigger?a.trigger({activate:I,disabled:T}):l(M,{dashed:!0,disabled:T,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:b,onClick:I},{icon:()=>l(q,{clsPrefix:r},{default:()=>l(ne,null)})}))}})}});export{ge as _};
