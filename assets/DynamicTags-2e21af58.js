import{t as L,_ as P,c as U}from"./Tag-d731c72f.js";import{a as $,b as K,M as W,e as x,u as E,aj as M,h as B,ak as N,i as H,R as q,x as G,a7 as D}from"./router-7f210e9c.js";import{u as J}from"./use-locale-d405c6af.js";import{i as Q,a as X}from"./Grid-87c6090c.js";import{A as Y}from"./Add-a982debf.js";import{s as Z,_ as ee}from"./Space-9d51f206.js";import{d as te,r as f,a2 as ne,c as V,h as u,n as ae}from"./plugin-vueexport-helper-dfa573d2.js";function se(t){switch(t){case"tiny":return"mini";case"small":return"tiny";case"medium":return"small";case"large":return"medium";case"huge":return"large"}throw Error(`${t} has no smaller size.`)}const ie=$({name:"DynamicTags",common:K,peers:{Input:Q,Button:W,Tag:L,Space:Z},self(){return{inputWidth:"64px"}}}),re=ie,ue=x("dynamic-tags",[x("input",{minWidth:"var(--n-input-width)"})]),le=Object.assign(Object.assign(Object.assign({},B.props),U),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputStyle:[String,Object],inputProps:Object,max:Number,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:t=>t},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),he=te({name:"DynamicTags",props:le,setup(t){const{mergedClsPrefixRef:h,inlineThemeDisabled:l}=E(t),{localeRef:o}=J("DynamicTags"),c=M(t),{mergedDisabledRef:s}=c,d=f(""),m=f(!1),p=f(!0),y=f(null),v=B("DynamicTags","-dynamic-tags",ue,re,t,h),C=f(t.defaultValue),F=ne(t,"value"),i=N(F,C),S=V(()=>o.value.add),O=V(()=>se(t.size)),b=V(()=>s.value||!!t.max&&i.value.length>=t.max);function _(e){const{onChange:n,"onUpdate:value":g,onUpdateValue:k}=t,{nTriggerFormInput:j,nTriggerFormChange:w}=c;n&&D(n,e),k&&D(k,e),g&&D(g,e),C.value=e,j(),w()}function T(e){const n=i.value.slice(0);n.splice(e,1),_(n)}function z(e){switch(e.key){case"Enter":r()}}function r(e){const n=e??d.value;if(n){const g=i.value.slice(0);g.push(t.onCreate(n)),_(g)}m.value=!1,p.value=!0,d.value=""}function R(){r()}function A(){m.value=!0,ae(()=>{var e;(e=y.value)===null||e===void 0||e.focus(),p.value=!1})}const I=V(()=>{const{self:{inputWidth:e}}=v.value;return{"--n-input-width":e}}),a=l?H("dynamic-tags",void 0,I,t):void 0;return{mergedClsPrefix:h,inputInstRef:y,localizedAdd:S,inputSize:O,inputValue:d,showInput:m,inputForceFocused:p,mergedValue:i,mergedDisabled:s,triggerDisabled:b,handleInputKeyUp:z,handleAddClick:A,handleInputBlur:R,handleCloseClick:T,handleInputConfirm:r,mergedTheme:v,cssVars:l?void 0:I,themeClass:a==null?void 0:a.themeClass,onRender:a==null?void 0:a.onRender}},render(){const{mergedTheme:t,cssVars:h,mergedClsPrefix:l,onRender:o,renderTag:c}=this;return o==null||o(),u(ee,{class:[`${l}-dynamic-tags`,this.themeClass],size:"small",style:h,theme:t.peers.Space,themeOverrides:t.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:s,tagStyle:d,type:m,round:p,size:y,color:v,closable:C,mergedDisabled:F,showInput:i,inputValue:S,inputStyle:O,inputSize:b,inputForceFocused:_,triggerDisabled:T,handleInputKeyUp:z,handleInputBlur:r,handleAddClick:R,handleCloseClick:A,handleInputConfirm:I,$slots:a}=this;return this.mergedValue.map((e,n)=>c?c(e,n):u(P,{key:n,theme:s.peers.Tag,themeOverrides:s.peerOverrides.Tag,style:d,type:m,round:p,size:y,color:v,closable:C,disabled:F,onClose:()=>A(n)},{default:()=>typeof e=="string"?e:e.label})).concat(i?a.input?a.input({submit:I,deactivate:r}):u(X,Object.assign({placeholder:"",size:b,style:O,autosize:!0},this.inputProps,{ref:"inputInstRef",value:S,onUpdateValue:e=>{this.inputValue=e},theme:s.peers.Input,themeOverrides:s.peerOverrides.Input,onKeyup:z,onBlur:r,internalForceFocus:_})):a.trigger?a.trigger({activate:R,disabled:T}):u(q,{dashed:!0,disabled:T,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:b,onClick:R},{icon:()=>u(G,{clsPrefix:l},{default:()=>u(Y,null)})}))}})}});export{he as _};
