import{aF as P,B as U,aG as j,aM as $,C as k,G as K,H as E,ay as N,r as h,I as w,a5 as W,a4 as G,J as F,K as H,t as u,al as J,v as M,aJ as q,aN as Q,ah as X,aE as D}from"./index-fcbc0ebc.js";import{u as Y}from"./use-locale-72c68c20.js";import{i as Z,a as ee}from"./Grid-a1cb5cdf.js";import{A as ne}from"./Add-507f5927.js";import{s as te,_ as ae}from"./Space-8d279138.js";function se(n){switch(n){case"tiny":return"mini";case"small":return"tiny";case"medium":return"small";case"large":return"medium";case"huge":return"large"}throw Error(`${n} has no smaller size.`)}const ie=P({name:"DynamicTags",common:U,peers:{Input:Z,Button:j,Tag:$,Space:te},self(){return{inputWidth:"64px"}}}),le=ie,ue=k("dynamic-tags",[k("input",{minWidth:"var(--n-input-width)"})]),re=Object.assign(Object.assign(Object.assign({},w.props),Q),{size:{type:String,default:"medium"},closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputStyle:[String,Object],inputProps:Object,max:Number,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:n=>n},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]}),ge=K({name:"DynamicTags",props:re,setup(n){const{mergedClsPrefixRef:f,inlineThemeDisabled:r}=E(n),{localeRef:o}=Y("DynamicTags"),c=N(n),{mergedDisabledRef:s}=c,d=h(""),m=h(!1),p=h(!0),y=h(null),v=w("DynamicTags","-dynamic-tags",ue,le,n,f),C=h(n.defaultValue),V=W(n,"value"),i=G(V,C),S=F(()=>o.value.add),O=F(()=>se(n.size)),b=F(()=>s.value||!!n.max&&i.value.length>=n.max);function _(e){const{onChange:t,"onUpdate:value":g,onUpdateValue:B}=n,{nTriggerFormInput:x,nTriggerFormChange:L}=c;t&&D(t,e),B&&D(B,e),g&&D(g,e),C.value=e,x(),L()}function T(e){const t=i.value.slice(0);t.splice(e,1),_(t)}function z(e){switch(e.key){case"Enter":l()}}function l(e){const t=e??d.value;if(t){const g=i.value.slice(0);g.push(n.onCreate(t)),_(g)}m.value=!1,p.value=!0,d.value=""}function I(){l()}function A(){m.value=!0,X(()=>{var e;(e=y.value)===null||e===void 0||e.focus(),p.value=!1})}const R=F(()=>{const{self:{inputWidth:e}}=v.value;return{"--n-input-width":e}}),a=r?H("dynamic-tags",void 0,R,n):void 0;return{mergedClsPrefix:f,inputInstRef:y,localizedAdd:S,inputSize:O,inputValue:d,showInput:m,inputForceFocused:p,mergedValue:i,mergedDisabled:s,triggerDisabled:b,handleInputKeyUp:z,handleAddClick:A,handleInputBlur:I,handleCloseClick:T,handleInputConfirm:l,mergedTheme:v,cssVars:r?void 0:R,themeClass:a==null?void 0:a.themeClass,onRender:a==null?void 0:a.onRender}},render(){const{mergedTheme:n,cssVars:f,mergedClsPrefix:r,onRender:o,renderTag:c}=this;return o==null||o(),u(ae,{class:[`${r}-dynamic-tags`,this.themeClass],size:"small",style:f,theme:n.peers.Space,themeOverrides:n.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:s,tagStyle:d,type:m,round:p,size:y,color:v,closable:C,mergedDisabled:V,showInput:i,inputValue:S,inputStyle:O,inputSize:b,inputForceFocused:_,triggerDisabled:T,handleInputKeyUp:z,handleInputBlur:l,handleAddClick:I,handleCloseClick:A,handleInputConfirm:R,$slots:a}=this;return this.mergedValue.map((e,t)=>c?c(e,t):u(J,{key:t,theme:s.peers.Tag,themeOverrides:s.peerOverrides.Tag,style:d,type:m,round:p,size:y,color:v,closable:C,disabled:V,onClose:()=>A(t)},{default:()=>typeof e=="string"?e:e.label})).concat(i?a.input?a.input({submit:R,deactivate:l}):u(ee,Object.assign({placeholder:"",size:b,style:O,autosize:!0},this.inputProps,{ref:"inputInstRef",value:S,onUpdateValue:e=>{this.inputValue=e},theme:s.peers.Input,themeOverrides:s.peerOverrides.Input,onKeyup:z,onBlur:l,internalForceFocus:_})):a.trigger?a.trigger({activate:I,disabled:T}):u(M,{dashed:!0,disabled:T,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:b,onClick:I},{icon:()=>u(q,{clsPrefix:r},{default:()=>u(ne,null)})}))}})}});export{ge as _};
